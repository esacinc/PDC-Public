<div class="grid-container" style="">
	<div class="container-fluid ui-helper-clearfix button-container-fluid">
	</div>

	<mat-card appearance="outlined" style="border-bottom: 1px solid #ddd">
		<br>
		<mat-card-title style="padding-left: 15px">
			<div class="usa-prose"><h2>CPTAC Pan-Cancer Data</h2></div>
		</mat-card-title>
		<mat-card-content class="card card-body" style="border: none;">
			<div class="row">
				<div class="col-xs-12 col-sm-4 col-md-3 col-lg-3" style="display: flex; align-items: center; padding: 20px;">
					<!-- PDC-8075 load smaller icon -->
					<img src="assets/pancancerCircle.png" alt="pancancer-logo" style="width: 100%; height: auto; min-height: 250px; object-fit: contain;">
				</div>
				<div class="col-xs-12 col-sm-8 col-md-9 col-lg-9 introduction">
				Welcome to the CPTAC Pan-Cancer Analysis Page! This page provides information about the data generated by the National Cancer Instituteâ€™s Clinical Proteomic Tumor Analysis Consortium (CPTAC) through the application of large-scale proteomic and genomic analysis to conduct a comprehensive and interconnected proteogenomic characterization of the most prevalent types of cancer.
				<br><br>
				Along with clinical and imaging data, this proteogenomic resource will further our understanding of the molecular changes that drive cancer development and progression, and support efforts to identify commonalities across different types of cancer and develop new strategies for diagnosis, treatment, and prevention.
				<br><br>
				On this page, you will find a collection of the papers focused on a first analysis of the data, as well as links to the data itself and supplementary materials from these publications.
				</div>
			</div>
		</mat-card-content>
	</mat-card>

  <mat-card appearance="outlined" *ngIf="totalRecords > 0">
	<br>
    <mat-card-title style="padding-left: 15px" class="title-card">
      <div class="usa-prose"><h4>Publications</h4></div>
    </mat-card-title>
    <mat-card-content class="card card-body" style="border: none; padding-left: 40px !important;">
		<p-table [value]="allPublicationsData" [lazy]="true" [paginator]="false" [(first)]="offset"
					[rows]="50" [pageLinks]="5" [rowsPerPageOptions]="[10,20,50, 100]" [totalRecords]="totalRecords"
					[loading]="loading" id="publicationsDataTable" > <!--(onLazyLoad)="loadPublications($event)"  -->

			<ng-template pTemplate="body" let-pubData let-rowIndex="rowIndex">
			<div style="border-bottom: 1px solid #c5c3c4;padding: 20px 25px;">
				<div style="display: flex; align-items: center; gap: 8px; font-size: 16px!important">
						<a href={{pubData.journal_url}} target="_" style="color: rgb(0, 80, 131)">{{pubData.title }}</a>
						<a href="https://www.ncbi.nlm.nih.gov/pubmed/{{pubData.pubmed_id}}" target="_" style="cursor: pointer; display: inline-flex; align-items: center;">
							<img alt="Pubmed url" src="./assets/css/images/pubmedIcon.png" style="height: 30px; vertical-align: middle;"></a>
						<a href="http://doi.org/{{pubData.doi}}" target="_" style="cursor: pointer; display: inline-flex; align-items: center;">
							<img alt="Pubmed url" src="./assets/css/images/doi.png" style="vertical-align: middle;"></a>
				</div>
				<div style="width: 60%;word-wrap: break-word; white-space: normal; padding-bottom: 5px;" class="abstract">
				<mat-expansion-panel hideToggle style="box-shadow: none;">
				<mat-expansion-panel-header style="font-size: 14px!important; padding-left: 0;">
					<mat-panel-title>
					<button mat-raised-button style="background-color: rgb(239, 239, 239);">Abstract</button>
					</mat-panel-title>
				</mat-expansion-panel-header>
					<span style="padding-top:10px">{{pubData.abstract}}</span>
				</mat-expansion-panel>
				</div>
				<div style="word-wrap: break-word; white-space: normal;"><i>{{pubData.journal }}</i> {{pubData.year }}</div>
				<div style="padding-top: 10px;">{{pubData.citation}}</div>

<!-- 				<div style="width: 60%;word-wrap: break-word; white-space: normal;padding-bottom: 10px;" class="relatedStudies">
					<mat-expansion-panel hideToggle style="box-shadow: none;">
					<mat-expansion-panel-header style="font-size: 14px!important; padding-left: 0;">
						<mat-panel-title>
						<button mat-raised-button style="background-color: rgb(239, 239, 239);">Related studies</button>
						</mat-panel-title>
					</mat-expansion-panel-header>
						<div *ngFor="let study of pubData.studies">
							<a href="javascript:void(0);" style="color: rgb(0, 80, 131)" (click)="showStudySummary(study.pdc_study_id, study.study_id, study.submitter_id_name)">
								{{study.submitter_id_name}} ({{study.pdc_study_id}})
							</a><br>
						</div>
					</mat-expansion-panel>
				</div> -->

 				<div *ngIf="pubData.publicationSupplementaryFiles > 0" style="padding-top:10px" id="{{pubData.publication_id}}">
					<!--<a href="javascript:void(0);" (click)="showFilesOverlay(pubData.publication_id)" class="supplementaryDataLink">
					Supplementary Data ({{ pubData.publicationSupplementaryFiles > 1 ? pubData.publicationSupplementaryFiles + ' files' : pubData.publicationSupplementaryFiles + ' file'}})</a>-->

				<!-- @@@PDC-8012 -->
				<mat-expansion-panel  style="box-shadow: none;padding-left:0 !important" class="remove-mat-expansion-panel-padding-pancancer-page" (click)="test($event,pubData.publication_id)">
					<mat-expansion-panel-header style="font-size: 14px!important; padding-left: 0; width:25%;background-color:white;"  >
						<mat-panel-title id="{{pubData.publication_id}}"  >
						<button id="{{pubData.publication_id}}" mat-flat-button (click)="showFilesTable(pubData.publication_id)" class="supplementaryDataLink">Supplementary Data ({{ pubData.publicationSupplementaryFiles > 1 ? pubData.publicationSupplementaryFiles + ' files' : pubData.publicationSupplementaryFiles + ' file'}})</button>
						</mat-panel-title>
					</mat-expansion-panel-header>
          <ng-template  matExpansionPanelContent>

				  <div>
						<p-table class="ui-noborder" #dt  [value]="filteredFilesData_obj[pubData.publication_id]" [lazy]="true"  [(first)]="offset"
									[rows]="10" [pageLinks]="5" [totalRecords]="totalRecords"
									[loading]="loading_sup"  [ngStyle]="{'font-size':'14px'}"
										(onLazyLoad)="loadFiles($event,pubData.publication_id)" emptyMessage=""  >

               <ng-template pTemplate="body" let-fileData let-rowIndex="rowIndex" style="background-color:blue !important;">
								 <div >
								   <a style="font-size: 14px!important; padding-left: 0;" class='publLink' (click)="downloadFile(fileData)">{{fileData.file_name }}</a>
								 </div>
							 </ng-template>
							</p-table>
				  </div>
				</ng-template>

				</mat-expansion-panel>
				</div>
			</div>
			</ng-template>
		</p-table>
 	  </mat-card-content>
    </mat-card>

	<mat-card appearance="outlined" *ngIf="totalRecords == 0 && loading == false">
		<mat-card-title class="title-card">
			<div style="font-size:20px;font-family: 'LatoBold';">Publications</div>
		  </mat-card-title>
		  <mat-card-content _ngcontent-wjm-c11="" class="card card-body mat-card-content" style="margin-left: 3%;margin-top: 1%;border: 1px solid lightgray;">
			Publications will appear here as soon as they are published.
		</mat-card-content>
	</mat-card>

  <!-- @@@PDC-8012 -->
	<mat-card appearance="outlined" *ngIf="publSupplementaryData != null">
		<br>
		<mat-card-title style="padding-left: 15px" class="title-card">
		  <div id="SupplementaryInformation" class="usa-prose"><h4>Supplementary Information</h4></div>
		</mat-card-title>
		<mat-card-content class="card card-body" style="border: none; padding-left: 20px">
			<div *ngIf="characterizationOrder.length > 0" style="padding-top: 5px; padding-left: 20px;font-size: 16px;">
        <mat-expansion-panel *ngFor="let characterization of characterizationOrder; let i=index" style="box-shadow: none;">
					<mat-expansion-panel-header  style="font-size: 16px!important; padding-left: 0; width:30%;background-color:white;">
						<mat-panel-title>
						  <button mat-flat-button class="supplementaryDataLink" style="font-size: 16px!important;">{{characterization}}</button>
						</mat-panel-title>
				  </mat-expansion-panel-header>
					<p-table [value]="publSupplementaryData" [lazy]="true" [paginator]="false" [(first)]="offset"
							   [rows]="50" [pageLinks]="5" [totalRecords]="totalRecords"
							   [loading]="loading" [ngClass]="{gray: even}"
							   id="suppDataTable" > <!--(onLazyLoad)="loadPublications($event)"  -->
					  <ng-template pTemplate="body" let-suppData let-suppDataAlt let-rowIndex="rowIndex">

						   <!-- <div id="{{suppData}}" *ngIf="rowIndex%2 == 0" style = "font-size: 16px; text-decoration: underline;"><a href="javascript:void(0);" (click)="scrollToElement('SupplementaryInformation')" class="faqs publLink">Go Back</a></div> -->
							 <!--
						   <div *ngIf="(suppData != null && suppData == characterization && isString(suppData) && (allCharacterizations.includes(suppData)));else other_content" style="word-wrap: break-word; white-space: normal;font-size: 20px!important;font-family: 'LatoBold'">
								   {{suppData}}
								 <br>
						   </div>
							 -->
						   <div *ngIf="(suppData != null && !isString(suppData))" >
								<ng-template #other_content ngFor let-supp [ngForOf]="suppDataAlt">
									<div #suppData *ngIf="supp.characterization == publSupplementaryData[rowIndex-1] && supp.characterization == characterization" >
										<div style="padding-top: 10px;border:none !important" *ngIf="supp.file_name != null"><span class="supplHeader">File:&nbsp;&nbsp;</span>
											<span *ngIf="supp.downloadable == 'Yes'"><a (click)="downloadFile(supp)" class='publLink'>{{supp.file_name}}</a></span>
											<span *ngIf="supp.downloadable == 'No'">{{supp.file_name}}</span>
										</div>
										<div *ngIf="supp.description != null" style="word-wrap: break-word; white-space: normal; padding-top:5px;"><span class="supplHeader">Description:&nbsp;&nbsp;</span>{{supp.description }}</div>
										<div *ngIf="supp.cohorts != null" style="padding-top: 5px; padding-bottom:5px;"><span class="supplHeader">Cohorts:&nbsp;&nbsp;</span>{{supp.cohorts}}</div>
										<div *ngIf="supp.related_publications != null && supp.related_publications.length > 0" style="word-wrap: break-word; white-space: normal; padding-bottom: 20px">
											<span class="supplHeader">Related Publications:&nbsp;&nbsp;</span>
											<span [innerHTML]="supp.related_publications_str"></span>
										</div>
										<div *ngIf="supp.related_publications != null && supp.related_publications.length == 0" style="padding-bottom: 15px"></div>
									</div>
								</ng-template>
							</div>

					   </ng-template>
				 </p-table>

			  </mat-expansion-panel>
				</div>
				<!--
				<ul style="list-style-type:circle">
					<li *ngFor="let characterization of characterizationOrder; let i=index">
							<span><a href="javascript:void(0);" (click)="scrollToElement(characterization)" class="faqs publLink">{{characterization}}</a></span>
					</li>
				</ul>
				-->


		</mat-card-content>
	  </mat-card>




	  <mat-card appearance="outlined" *ngIf="additionalResources != null">
		<br>
		<mat-card-title style="padding-left: 15px" class="title-card">
		  <div class="usa-prose"><h4>Additional Resources</h4></div>
		</mat-card-title>
		<mat-card-content class="card card-body" style="border: none; padding-left: 40px">
		  <p-table [value]="additionalResources" [paginator]="false" id="additionalResourcesTable">
			   <ng-template pTemplate="body" let-addResources let-rowIndex="rowIndex">
				 <div style="border-bottom: 1px solid #c5c3c4;padding: 20px 25px;">
				   <div class="usa-prose">
						<h6>{{addResources.type}}</h6>
					</div>
					<div style="padding-top: 10px;"><span class="supplHeader" style="color: rgb(0, 80, 131)">Description</span> - <span [innerHTML]="addResources.description"></span></div>
				 </div>
			   </ng-template>
		   </p-table>
		</mat-card-content>
	  </mat-card>
</div>
